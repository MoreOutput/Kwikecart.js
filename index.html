<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Kwikicart</title>
	</head>
	<body>
		<div id="content">
			<section id="products">		
				<header>
					<h1>Products</h1>		
				</header>	
				<ul>
					<li class="product" id="product-3423">
						<h2 class="product-name">
							<a href="">Worlds Best Item</a>
						</h2>

						<div>
							<div class="product-info">
								<div class="product-pid">3423</div>
								<div class="product-price">$45.00</div>
							</div>
						</div>

						<!-- Our Actions that Kwikicart.js will call on each related call -->
						<form method="post" action="./add" name="itemaddform">
							<div class="itemFields">
								<input type="hidden" name="name" value="Worlds Best Item" />
								<input type="hidden" name="pid" value="3423" />
								<input type="hidden" name="price" value="45.00" />
							</div>
							<button type="submit" name="addtocart">Add to Cart</button>
						</form>

						<form method="post" action="./remove" name="itemremoveform">
							<button type="submit" name="removecart">Remove</button>
						</form>

						<form method="post" action="./check" name="itemcheckform">
							<input type="hidden" name="pid" value="3423" />
						</form>
					</li>
				</ul>
			</section>
		</div>
		<aside id="sidebar">
			<h1>Cart</h1>
			<section id="cart">	
				<ul class="cart-products">
				</ul>

				<div class="cart-total">
				</div>

				<form id="checkoutfrm" action="./checkout" method="post" name="cartcheckout">	
					<input type="hidden" name="cmd" value="_cart" />
					<input type="hidden" name="redirect_cmd" value="_xclick" />
					<input type="hidden" name="business" value="info@example.com" />
					<input type="hidden" name="no_shipping" value="1"/>
					<input type="hidden" name="return" value="http://www.example.com" />
					<input type="hidden" name="cancel_return" value="http://www.example.com" />
					<input type="hidden" name="notify_url" value="http://www.example.com?paypalcallback" />
					<input type="hidden" name="invoice" value="" />
					<input type="hidden" name="trackingid" value="" />
					<input type="hidden" name="currency_code" value="USD" />
					<input type="hidden" name="upload" value="1" />	
					<input type="hidden" id="total" value="" name="total" />
					<button type="submit" name="checkout" id="submitbtn">Checkout</button>
				</form> 
				
				<div id="cart-actions">			
					<form method="post" action="./total" name="totalcartform">
						<button type="submit" name="removecart">Total Cart</button>
					</form>

					<form method="post" action="./clear" name="clearcartform">
						<button type="submit" name="removecart">Clear</button>
					</form>
				</div>
			</section>
		</aside>

		<form method="post" action="./increment" name="itemremoveform">
			
		</form>

		<script src="https://ajax.googleapis.com/ajax/libs/dojo/1.9.2/dojo/dojo.js"></script>
		<script>
			// kwikicart.js
			require({
				baseUrl: 'js/'
			}, ['js/kwikicart', 'dojo/ready'], 
			function(store, ready) {
				'use strict';
				ready(function () {		
					var products = [
						{ id: "product-3423", name: "Product1", quantity: 1, price: 45.00},
						{ id: "product-3424", name: "Product2", quantity: 1, price: 15.00},
						{ id: "product-3425", name: "Product3", quantity: 1, price: 25.00},
						{ id: "product-3426", name: "Product4", quantity: 1, price: 55.25},
						{ id: "product-3427", name: "Product5", quantity: 1, price: 145.00},
						{ id: "product-3428", name: "Product6", quantity: 1, price: 425.00},
						{ id: "product-3429", name: "Product7", quantity: 1, price: 325.00},
						{ id: "product-3430", name: "Product8", quantity: 1, price: 145.00}
					],
					// Setting up the store.
					cart = store.create({
						expires: 1
					});
					
					//cart.add('#product-3423');
					
					// Adding, in .product expected form name: itemaddform
					//cart.add('#product-3423');
					//cart.add({ id: "product-3423", name: "Product1", quantity: 1, price: 45.00});
					//cart.add(products);

					// Removing, in .product expected form name: itemremoveform
					//cart.remove('product-3423'); // Fully removes product
					//cart.remove(products); // Fully removes product set
					//cart.remove(); // Fully removes all products
					//cart.remove(false); // Removes all but keeps cookie data

					// Increment, in .product expected form name: itemaddform
					//cart.add('#product-3423', 2);
					//cart.add({ id: "product-3423", name: "Product1", quantity: 1, price: 45.00}, 2);
					//cart.add(products, 2);

					// Decrement, in .product expected form name: itemaddform
					//cart.remove('product-3423', 1); 

					// Data Checking, in .product expected form name: itemcheckform
					//cart.check('product-3423'); // Get item data from server
					//cart.check('product-3423', false); // Get item data from markup
					
					// Totaling, expected form name: totalcartform
					//cart.total(); // From DOM data
					//cart.total(true); // From server

					// Checkout, expected form name: checkoutform
					//cart.checkout() // Routing to next area
				});
			});
		</script>
	</body>
</html>